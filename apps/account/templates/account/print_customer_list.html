{% load django_bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript %}

<!DOCTYPE html>
<html>
<head>
    <title>Customer List</title>
    <style>
        @media print {
            .no-print { display: none; }
        }
        .program-section {
            page-break-inside: avoid;
            margin-bottom: 30px;
        }
    </style>
</head>
<body class="bg-light" onload="window.print()">
<div class="container my-4">

  <!-- Logo and Branding -->
  {% if branding.logo %}
  <div class="text-center mb-3">
    <img src="{{ branding.logo.url }}" alt="{{ branding.organization_name }}" style="max-height: 80px;">
  </div>
  {% endif %}

  <div class="text-center mb-4">
    <h2>Customer List by Program</h2>
    <p class="text-muted">Total Customers: {{ total_customers }}</p>
  </div>

  <!-- Programs and Customers -->
  {% for program_name, customers in programs.items %}
  <div class="program-section">
    <!-- Program Header -->
    <div class="alert alert-info mb-3">
      <h4 class="mb-0"><strong>{{ program_name }}</strong> ({{ customers|length }} customer{{ customers|length|pluralize }})</h4>
    </div>

    <!-- Customer Table -->
    <table class="table table-striped table-bordered">
      <thead class="table-light">
        <tr>
          <th style="width: 60%;">Customer Name</th>
          <th style="width: 40%;">Customer Number</th>
        </tr>
      </thead>
      <tbody>
        {% for customer in customers %}
        <tr>
          <td>{{ customer.name }}</td>
          <td><strong>{{ customer.customer_number|default:"N/A" }}</strong></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% empty %}
  <div class="alert alert-warning">
    No customers selected.
  </div>
  {% endfor %}

  <!-- Footer -->
  <div class="text-muted small mt-4">
    Printed on {% now "M d, Y H:i" %}
  </div>

</div>
</body>
</html>
