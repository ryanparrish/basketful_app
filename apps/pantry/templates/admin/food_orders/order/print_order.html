{% load django_bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript %}

{% block content %}
<body class="bg-light" onload="window.print()">
<div class="container my-4">

  <!-- Logo and Branding -->
  {% if branding.logo %}
  <div class="text-center mb-3">
    <img src="{{ branding.logo.url }}" alt="{{ branding.organization_name }}" style="max-height: 80px;">
  </div>
  {% endif %}

  <!-- Program Banner -->
  {% if program %}
  <div class="alert alert-info text-center mb-4">
    <strong>Program:</strong> {{ program.name }}
  </div>
  {% endif %}

  <!-- Header -->
  <div class="mb-4">
    <h2>Order #{{ order.order_number }} Details</h2>
    <div class="row">
      <div class="col-md-6">
        <p><strong>Placed on:</strong> {{ order.created_at|date:"M d, Y H:i" }}</p>
        <p><strong>Status:</strong> {{ order.status_type|default:"N/A" }}</p>
      </div>
      <div class="col-md-6">
        {% if customer_number %}<p><strong>Customer #:</strong> {{ customer_number }}</p>{% endif %}
      </div>
    </div>
  </div>

  <!-- Items Table -->
  <div class="card mb-4 p-4 shadow-sm">
    <table class="table table-striped mt-4">
      <thead>
        <tr>
          <th>Product</th>
          <th>Category</th>
          <th class="text-center">Quantity</th>
          <th class="text-end">Price</th>
          <th class="text-end">Line Total</th>
        </tr>
      </thead>
      <tbody>
        {% for item in order.items.all %}
        <tr>
          <td>{{ item.product.name }}</td>
          <td>{{ item.product.category.name }}</td>
          <td class="text-center">{{ item.quantity }}</td>
          <td class="text-end">${{ item.product.price|floatformat:2 }}</td>
          <td class="text-end">${{ item.total_price|floatformat:2 }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center text-muted">No items in this order.</td>
        </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <th colspan="4" class="text-end">Order Total:</th>
          <th class="text-end">${{ order.total_price|floatformat:2 }}</th>
        </tr>
      </tfoot>
    </table>
  </div>

  <!-- Optional footer for admin reference -->
  <div class="text-muted small">
    Printed on {{ now|date:"M d, Y H:i" }}
  </div>

</div>
</body>
{% endblock %}
